---
format_version: '6'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: other
workflows:
  pullrequest:
    envs:
      - _JAVA_OPTIONS: "-Xms512m -Xmx4g"
    steps:
    - script:
        title: Build
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            ./gradlew build dokka :arrow-docs:runAnk
            rvm use 2.5.3 --install --fuzzy
            bundle install --gemfile modules/docs/arrow-docs/Gemfile --path vendor/bundle
            export BUNDLE_GEMFILE=modules/docs/arrow-docs/Gemfile
            bundle exec jekyll build -s ~/site -d ~/_site
            pip install --user awscli
            aws s3 sync ~/_site s3://$S3_BUCKET > aws_sync_site.log
